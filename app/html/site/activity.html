@extends("shared/layout.html")
@require(activity)
@def sidebar():

@include('shared/sidebar/home.html')
@end

@def main():
<div id="center-container">
  <div class="content" style="margin-left: 1em">
    <h1>@{_("Recent activity")}</h1>
    <ol class="mod-table">
    <li class="mod-table-header pure-g">
      <div class="header pure-u-1 pure-u-md-4-24">@{_('Time')}</div>
      <div class="header pure-u-1 pure-u-md-3-24">@{_('User')}</div>
      <div class="header pure-u-1 pure-u-md-13-24">@{_('Content')}</div>
      <div class="header pure-u-1 pure-u-md-4-24">@{_('Sub')}</div>
    </li>
    @for it in activity:
    <li class="mod-table-row pure-g">
      <div data-name="@{_('Time:')}" class="elem sub pure-u-1 pure-u-md-4-24">
        <time-ago datetime="@{it['time'].isoformat()}Z" class="sidebarlists"></time-ago>
      </div>
      <div data-name="@{_('Sub:')}" class="elem sub pure-u-1 pure-u-md-3-24">
        <a href="/u/@{it['user']}">@{it['user']}</a>
      </div>
      <div data-name="@{_('Action:')}" class="elem sub pure-u-1 pure-u-md-13-24">
        @if it['type'] == 'comment':
          @{_('commented: %(text)s', text='<a class="' + it['blur'] + '" href="' + url_for('sub.view_perm', sub=it['sub'], cid=it['cid'], pid=it['pid'], slug=func.slugify(it['content'])) + '#comment-' + it['cid'] + '">' + e(func.word_truncate(it['content'], 100)) + '</a>')!!html}
        @else:
          @{_('posted: %(text)s', text='<a class="' + it['blur'] + '" href="' + url_for('sub.view_post', sub=it['sub'], pid=it['pid']) + '">' + e(func.word_truncate(it['content'], 100)) + '</a>')!!html}
        @end
        @if it['nsfw'] or it['sub_nsfw']:
          <span class="nsfw smaller" alt="Not safe for work">@{_('NSFW')}</span>
        @endif
      </div>
      <div data-name="@{_('Sub:')}" class="elem sub pure-u-1 pure-u-md-4-24">
        <a href="@{url_for('sub.view_sub', sub=it['sub'])}">@{config.site.sub_prefix}/@{it['sub']}</a>
      </div>
    </li>
    @end
   </ol>
  </div>
</div>
@end

@def pagefoot():
<label id="pagefoot-nsfw" data-value="@{'nsfw' in current_user.prefs}" class="hide"></label>
<label id="pagefoot-nsfw-blur" data-value="@{'nsfw_blur' in current_user.prefs}" class="hide"></label>
@end
